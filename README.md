# Инструкция для работы с Git и удалёнными репозиториями
![][def]

[def]: https://file%2B.vscode-resource.vscode-cdn.net/c%3A/Users/%D0%90%D0%BD%D0%B0%D1%82%D0%BE%D0%BB%D0%B8%D0%B9/Desktop/GBRepository/logo%402x.png?version%3D1665384786237

## Что такое Git?
Git - это одна из реализаций распределённых систем контроля версий, имеющая как и локальные, так и удалённые репозитории. Является самой популярной реализацией систем контроля версий в мире.
## Подготовка репозитория
Для создание репозитория необходимо выполнить команду *git init*  в папке с репозиторием и у Вас создаться репозиторий (появится скрытая папка .git)

## Создание коммитов

### Git add
Для добавления измений в коммит используется команда *git add*. Чтобы использовать команду *git add* напишите *git add <имя файла>*

### Просмотр состояния репозитория
Для того, чтобы посмотреть состояние репозитория используется команда *git status*. Для этого необходимо в папке с репозиторием написать *git status*, и Вы увидите были ли измения в файлах, или их не было.

### Создание коммитов
Для того, чтобы создать коммит(сохранение) необходимо выполнить команду *git commit*. Выполняется она так: *git commit -m "<сообщение к коммиту>*. Все файлы для коммита должны быть ***ДОБАВЛЕНЫ*** и сообщение к коммиту писать ***ОБЯЗАТЕЛЬНО***.

## Перемещение между сохранениями
Для того, чтобы перемещаться между коммитами, используется команда *git checkout*. Используется она в папке с пепозиторием следующим образом: *git checkout <номер коммита>*

## Журнал изменений
Для того, чтобы посмтреть все сделанные изменения в репозитории, используется команда *git log*. Для этого достаточно выполнить команду *git log* в папке с репозиторием

## Ветки в Git
**.gitignore** - файл, в котором написанные названия файлов будут игнорироваться (каждый должен быть написан с новой строки)

**git checkout -b название ветки** - создать новую ветку и переместиться туда

## Создание ветки

Для того, чтобы создать ветку, используется команда *git branch*. Делается это следующим образом в папке с репозиторием: *git branch <название новой ветки>*

## Слияние веток

Для того чтобы дабавить ветку в текущую ветку используется команда *git merge <name branch>*

## Удаление веток
Для удаления ветки ввести команду "git branch -d 'name branch'"

`наполнение инструкции продолжается...`

# Работа с удалёнными репозиториями

Ссылка на документацию по Git https://git-scm.com/book/ru/v2/Основы-Git-Работа-с-удалёнными-репозиториями

***

## **git remote**

**git remote** — это интерфейс для управления списком записей об удаленных подключениях, которые хранятся в файле /.git/config репозитория.

Команда `git remote` выведет список ваших подключений к удалённым репозиториям.
* `git remote -v`  - аналогично команде выше, но включает URL-адрес каждого подключения (v - verbose, подробный).



`git remote add name url` - Создание нового подключения к удаленному репозиторию. После добавления удаленного репозитория имя **name** можно использовать в качестве удобного ярлыка для адреса **url** в других командах Git.

* `git remote rename старое_имя новое_имя` - Переименование удаленного подключения.

* `git remote remove name` - DELETE подключения к удаленному репозиторию.

![](pushpullimg.jpg)

git pull - скачать

git push - отправить

***

## **git pull**

Команда `git pull ссылка` скачивает удаленные файлы (с GitHub н-р) в ваш уже созданный репозиторий. Git pull - команда для получения последних изменений - используется именно для получения последних изменений, т.е. для получения той информации, что добавили ваши коллеги - скачает только последние изменения, файл, а не полностью репозиторий.
***

## **git clone**

`git clone ссылка` - команда клонирования репозитория - используется для первоначального копирования репозитория, т.е. для создания копии на вашей машине, когда у вас вообще ничего нет - скачает всю информацию.

<details>
    <summary>отличия git pull от git clone</summary>
    Если чуточку упростить, то можно сказать, что команда git clone делает git init + git pull. git init применяться для того, что бы создать пустой репозиторий, а git pull - его наполнить с другого репозитория.

Поэтому, если кто то сделал изменения в репозитории, а его у Вас (репозитория) нет, то нужно делать clone. Если репозиторий уже есть у Вас (тут иногда говорят, что он уже был склонирован раньше, но это не совсем верно - ведь он мог быть склонирован на другой машине или был склонирован и удален/разломан в куски), тогда достаточно pull.
</details>

<details>
    <summary>механика работы git pull</summary>
На самом деле внутри себя она выполняет две команды:

**git fetch**

**git merge**

Команда `git fetch` сливает все данные с проекта, которые находятся в нашем remote репозитории. Все данные которых у нас нет она сливает, но не применяет в наши ветки. Ее можно использовать безбоязненно даже не думая, что что-то поломается. И потом git merge мерджит текущую ветку с такой же веткой из репозитория.
</details>

***

## **git push**

`git push` - используется для выгрузки содержимого локального репозитория в удаленный репозиторий. Она позволяет передать коммиты из локального репозитория в удаленный.

* `git push remote-name branch-name`

 В этом примере содержимое локальной ветки ***branch-name*** передается в удаленный репозиторий, обозначенный как ***remote-name*** со всеми необходимыми коммитами и внутренними объектами. Эта команда создает локальную ветку в репозитории назначения. Чтобы предотвратить перезапись коммитов, Git не позволит опубликовать данные, если в репозитории назначения нельзя выполнить ускоренное слияние.
 
 * <details>
   <summary>подробнее о конфликте с push при слиянии</summary>
     Git предотвращает перезапись истории центрального репозитория, отклоняя push-запросы, если нельзя выполнить их ускоренное слияние. Так, если история удаленного репозитория отличается от вашей истории, необходимо загрузить удаленную ветку командой pull и выполнить ее слияние с локальной веткой командой merge, а затем попробовать выполнить команду push еще раз</details>

 
**Стирание удаленной ветки или тега**

Иногда ветки необходимо чистить для наведения порядка. Чтобы полностью стереть ветку, ее необходимо стереть как в локальном репозитории, так и в удаленном.


    git branch -D branch_name
    git push origin :branch_name

Первая команда сотрет локальную ветку с именем branch_name. Если в команде git push перед именем ветки поставить двоеточие, будет стерта удаленная ветка.

# Пул-реквесты

Создавая пул-реквест, вы всего лишь просите другого разработчика (например, человека, занимающегося поддержкой проекта) забрать ветку из вашего репозитория в его репозиторий. 

<details>
   <summary>Принцип работы</summary>

1.  Разработчик создает функцию в отдельной ветке в своем локальном репозитории.

2.  Разработчик отправляет эту ветку в публичный репозиторий Bitbucket командой push.

3. Разработчик создает запрос pull через Bitbucket.

4. Остальные участники команды проверяют код, обсуждают его и вносят изменения.

5. Человек, занимающийся поддержкой проекта, сливает функцию в официальный репозиторий и закрывает запрос pull.
</details>

## Выполнение запроса:

Чувак - разработчик, т.е. мы

Создатель - создатель проекта, программист

1. Нам нужно сначала создать форк репозитория Создателя. Перейдём на страницу его проекта и нажмём Fork. Указав имя и описание для репозитория, создаваемого с помощью форка, мы получим копию серверной части проекта.

2. Затем мы должны клонировать репозиторий, который мы только что создали с помощью форка. Так мы получим собственную рабочую копию проекта на своей локальной машине. Мы может сделать это с помощью следующей команды:
`git clone https://ссылка на наш форк`
3. Прежде чем писать какой бы то ни было код, мы должны создать новую ветку для функции. Эту ветку мы будем использовать в качестве исходной в запросе pull.
    
    * `git checkout -b название_нашей_ветки` - создать ветку
    * `Внести наши правки в код`
    * `git commit -a -m "комментарий"` - добавить файл, сделать коммит и написать к нему комментарий

4. Закончив свою задачу, мы помещаем функциональную ветку в собственный репозиторий на GitHub (не в официальный репозиторий проекта) с помощью простой команды git push:
    * `git push origin название_нашей_ветки`

5. **Создаём запрос пул-реквест**. После добавления своей ветки в наш GitHub аккаунт,  мы из своего аккаунта можем создать пул-реквест, перейдя в свой репозиторий, созданный с помощью форка, и нажав на кнопку **Pull request** вверху. Потребуется ввести заголовок и описание запроса pull.
6.  После создания запроса pull Создателю будет отправлено уведомление через GitHub и\или по электронной почте. У создателя все предложенные запросы на изменение будут отражены во вкладке Pull request. Если создатель считает функционал готовым к слиянию с проектом, ему достаточно нажать кнопку Merge (Слияние), чтобы одобрить запрос pull и выполнить слияние нашего функционала со своей веткой main.
    * Для примера представим, что Создатель нашел небольшой баг в нашем коде и хочет, чтобы он был исправлен перед слиянием. Создатель может либо опубликовать комментарий к запросу pull в целом, либо выбрать определенный коммит в истории функциональной ветки и прокомментировать его.